diff -urN /home/huyong/Public/libstm32isp/.git/HEAD ispload/.git/HEAD
--- /home/huyong/Public/libstm32isp/.git/HEAD	2018-06-21 11:00:43.000000000 +0800
+++ ispload/.git/HEAD	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-ref: refs/heads/master
diff -urN /home/huyong/Public/libstm32isp/.git/config ispload/.git/config
--- /home/huyong/Public/libstm32isp/.git/config	2018-06-21 11:00:43.000000000 +0800
+++ ispload/.git/config	1970-01-01 08:00:00.000000000 +0800
@@ -1,11 +0,0 @@
-[core]
-	repositoryformatversion = 0
-	filemode = true
-	bare = false
-	logallrefupdates = true
-[remote "origin"]
-	url = https://github.com/wengkai/stm32isp.git
-	fetch = +refs/heads/*:refs/remotes/origin/*
-[branch "master"]
-	remote = origin
-	merge = refs/heads/master
diff -urN /home/huyong/Public/libstm32isp/.git/description ispload/.git/description
--- /home/huyong/Public/libstm32isp/.git/description	2018-06-21 11:00:34.000000000 +0800
+++ ispload/.git/description	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-Unnamed repository; edit this file 'description' to name the repository.
diff -urN /home/huyong/Public/libstm32isp/.git/hooks/applypatch-msg.sample ispload/.git/hooks/applypatch-msg.sample
--- /home/huyong/Public/libstm32isp/.git/hooks/applypatch-msg.sample	2018-06-21 11:00:34.000000000 +0800
+++ ispload/.git/hooks/applypatch-msg.sample	1970-01-01 08:00:00.000000000 +0800
@@ -1,15 +0,0 @@
-#!/bin/sh
-#
-# An example hook script to check the commit log message taken by
-# applypatch from an e-mail message.
-#
-# The hook should exit with non-zero status after issuing an
-# appropriate message if it wants to stop the commit.  The hook is
-# allowed to edit the commit message file.
-#
-# To enable this hook, rename this file to "applypatch-msg".
-
-. git-sh-setup
-commitmsg="$(git rev-parse --git-path hooks/commit-msg)"
-test -x "$commitmsg" && exec "$commitmsg" ${1+"$@"}
-:
diff -urN /home/huyong/Public/libstm32isp/.git/hooks/commit-msg.sample ispload/.git/hooks/commit-msg.sample
--- /home/huyong/Public/libstm32isp/.git/hooks/commit-msg.sample	2018-06-21 11:00:34.000000000 +0800
+++ ispload/.git/hooks/commit-msg.sample	1970-01-01 08:00:00.000000000 +0800
@@ -1,24 +0,0 @@
-#!/bin/sh
-#
-# An example hook script to check the commit log message.
-# Called by "git commit" with one argument, the name of the file
-# that has the commit message.  The hook should exit with non-zero
-# status after issuing an appropriate message if it wants to stop the
-# commit.  The hook is allowed to edit the commit message file.
-#
-# To enable this hook, rename this file to "commit-msg".
-
-# Uncomment the below to add a Signed-off-by line to the message.
-# Doing this in a hook is a bad idea in general, but the prepare-commit-msg
-# hook is more suited to it.
-#
-# SOB=$(git var GIT_AUTHOR_IDENT | sed -n 's/^\(.*>\).*$/Signed-off-by: \1/p')
-# grep -qs "^$SOB" "$1" || echo "$SOB" >> "$1"
-
-# This example catches duplicate Signed-off-by lines.
-
-test "" = "$(grep '^Signed-off-by: ' "$1" |
-	 sort | uniq -c | sed -e '/^[ 	]*1[ 	]/d')" || {
-	echo >&2 Duplicate Signed-off-by lines.
-	exit 1
-}
diff -urN /home/huyong/Public/libstm32isp/.git/hooks/post-update.sample ispload/.git/hooks/post-update.sample
--- /home/huyong/Public/libstm32isp/.git/hooks/post-update.sample	2018-06-21 11:00:34.000000000 +0800
+++ ispload/.git/hooks/post-update.sample	1970-01-01 08:00:00.000000000 +0800
@@ -1,8 +0,0 @@
-#!/bin/sh
-#
-# An example hook script to prepare a packed repository for use over
-# dumb transports.
-#
-# To enable this hook, rename this file to "post-update".
-
-exec git update-server-info
diff -urN /home/huyong/Public/libstm32isp/.git/hooks/pre-applypatch.sample ispload/.git/hooks/pre-applypatch.sample
--- /home/huyong/Public/libstm32isp/.git/hooks/pre-applypatch.sample	2018-06-21 11:00:34.000000000 +0800
+++ ispload/.git/hooks/pre-applypatch.sample	1970-01-01 08:00:00.000000000 +0800
@@ -1,14 +0,0 @@
-#!/bin/sh
-#
-# An example hook script to verify what is about to be committed
-# by applypatch from an e-mail message.
-#
-# The hook should exit with non-zero status after issuing an
-# appropriate message if it wants to stop the commit.
-#
-# To enable this hook, rename this file to "pre-applypatch".
-
-. git-sh-setup
-precommit="$(git rev-parse --git-path hooks/pre-commit)"
-test -x "$precommit" && exec "$precommit" ${1+"$@"}
-:
diff -urN /home/huyong/Public/libstm32isp/.git/hooks/pre-commit.sample ispload/.git/hooks/pre-commit.sample
--- /home/huyong/Public/libstm32isp/.git/hooks/pre-commit.sample	2018-06-21 11:00:34.000000000 +0800
+++ ispload/.git/hooks/pre-commit.sample	1970-01-01 08:00:00.000000000 +0800
@@ -1,49 +0,0 @@
-#!/bin/sh
-#
-# An example hook script to verify what is about to be committed.
-# Called by "git commit" with no arguments.  The hook should
-# exit with non-zero status after issuing an appropriate message if
-# it wants to stop the commit.
-#
-# To enable this hook, rename this file to "pre-commit".
-
-if git rev-parse --verify HEAD >/dev/null 2>&1
-then
-	against=HEAD
-else
-	# Initial commit: diff against an empty tree object
-	against=4b825dc642cb6eb9a060e54bf8d69288fbee4904
-fi
-
-# If you want to allow non-ASCII filenames set this variable to true.
-allownonascii=$(git config --bool hooks.allownonascii)
-
-# Redirect output to stderr.
-exec 1>&2
-
-# Cross platform projects tend to avoid non-ASCII filenames; prevent
-# them from being added to the repository. We exploit the fact that the
-# printable range starts at the space character and ends with tilde.
-if [ "$allownonascii" != "true" ] &&
-	# Note that the use of brackets around a tr range is ok here, (it's
-	# even required, for portability to Solaris 10's /usr/bin/tr), since
-	# the square bracket bytes happen to fall in the designated range.
-	test $(git diff --cached --name-only --diff-filter=A -z $against |
-	  LC_ALL=C tr -d '[ -~]\0' | wc -c) != 0
-then
-	cat <<\EOF
-Error: Attempt to add a non-ASCII file name.
-
-This can cause problems if you want to work with people on other platforms.
-
-To be portable it is advisable to rename the file.
-
-If you know what you are doing you can disable this check using:
-
-  git config hooks.allownonascii true
-EOF
-	exit 1
-fi
-
-# If there are whitespace errors, print the offending file names and fail.
-exec git diff-index --check --cached $against --
diff -urN /home/huyong/Public/libstm32isp/.git/hooks/pre-push.sample ispload/.git/hooks/pre-push.sample
--- /home/huyong/Public/libstm32isp/.git/hooks/pre-push.sample	2018-06-21 11:00:34.000000000 +0800
+++ ispload/.git/hooks/pre-push.sample	1970-01-01 08:00:00.000000000 +0800
@@ -1,53 +0,0 @@
-#!/bin/sh
-
-# An example hook script to verify what is about to be pushed.  Called by "git
-# push" after it has checked the remote status, but before anything has been
-# pushed.  If this script exits with a non-zero status nothing will be pushed.
-#
-# This hook is called with the following parameters:
-#
-# $1 -- Name of the remote to which the push is being done
-# $2 -- URL to which the push is being done
-#
-# If pushing without using a named remote those arguments will be equal.
-#
-# Information about the commits which are being pushed is supplied as lines to
-# the standard input in the form:
-#
-#   <local ref> <local sha1> <remote ref> <remote sha1>
-#
-# This sample shows how to prevent push of commits where the log message starts
-# with "WIP" (work in progress).
-
-remote="$1"
-url="$2"
-
-z40=0000000000000000000000000000000000000000
-
-while read local_ref local_sha remote_ref remote_sha
-do
-	if [ "$local_sha" = $z40 ]
-	then
-		# Handle delete
-		:
-	else
-		if [ "$remote_sha" = $z40 ]
-		then
-			# New branch, examine all commits
-			range="$local_sha"
-		else
-			# Update to existing branch, examine new commits
-			range="$remote_sha..$local_sha"
-		fi
-
-		# Check for WIP commit
-		commit=`git rev-list -n 1 --grep '^WIP' "$range"`
-		if [ -n "$commit" ]
-		then
-			echo >&2 "Found WIP commit in $local_ref, not pushing"
-			exit 1
-		fi
-	fi
-done
-
-exit 0
diff -urN /home/huyong/Public/libstm32isp/.git/hooks/pre-rebase.sample ispload/.git/hooks/pre-rebase.sample
--- /home/huyong/Public/libstm32isp/.git/hooks/pre-rebase.sample	2018-06-21 11:00:34.000000000 +0800
+++ ispload/.git/hooks/pre-rebase.sample	1970-01-01 08:00:00.000000000 +0800
@@ -1,169 +0,0 @@
-#!/bin/sh
-#
-# Copyright (c) 2006, 2008 Junio C Hamano
-#
-# The "pre-rebase" hook is run just before "git rebase" starts doing
-# its job, and can prevent the command from running by exiting with
-# non-zero status.
-#
-# The hook is called with the following parameters:
-#
-# $1 -- the upstream the series was forked from.
-# $2 -- the branch being rebased (or empty when rebasing the current branch).
-#
-# This sample shows how to prevent topic branches that are already
-# merged to 'next' branch from getting rebased, because allowing it
-# would result in rebasing already published history.
-
-publish=next
-basebranch="$1"
-if test "$#" = 2
-then
-	topic="refs/heads/$2"
-else
-	topic=`git symbolic-ref HEAD` ||
-	exit 0 ;# we do not interrupt rebasing detached HEAD
-fi
-
-case "$topic" in
-refs/heads/??/*)
-	;;
-*)
-	exit 0 ;# we do not interrupt others.
-	;;
-esac
-
-# Now we are dealing with a topic branch being rebased
-# on top of master.  Is it OK to rebase it?
-
-# Does the topic really exist?
-git show-ref -q "$topic" || {
-	echo >&2 "No such branch $topic"
-	exit 1
-}
-
-# Is topic fully merged to master?
-not_in_master=`git rev-list --pretty=oneline ^master "$topic"`
-if test -z "$not_in_master"
-then
-	echo >&2 "$topic is fully merged to master; better remove it."
-	exit 1 ;# we could allow it, but there is no point.
-fi
-
-# Is topic ever merged to next?  If so you should not be rebasing it.
-only_next_1=`git rev-list ^master "^$topic" ${publish} | sort`
-only_next_2=`git rev-list ^master           ${publish} | sort`
-if test "$only_next_1" = "$only_next_2"
-then
-	not_in_topic=`git rev-list "^$topic" master`
-	if test -z "$not_in_topic"
-	then
-		echo >&2 "$topic is already up-to-date with master"
-		exit 1 ;# we could allow it, but there is no point.
-	else
-		exit 0
-	fi
-else
-	not_in_next=`git rev-list --pretty=oneline ^${publish} "$topic"`
-	/usr/bin/perl -e '
-		my $topic = $ARGV[0];
-		my $msg = "* $topic has commits already merged to public branch:\n";
-		my (%not_in_next) = map {
-			/^([0-9a-f]+) /;
-			($1 => 1);
-		} split(/\n/, $ARGV[1]);
-		for my $elem (map {
-				/^([0-9a-f]+) (.*)$/;
-				[$1 => $2];
-			} split(/\n/, $ARGV[2])) {
-			if (!exists $not_in_next{$elem->[0]}) {
-				if ($msg) {
-					print STDERR $msg;
-					undef $msg;
-				}
-				print STDERR " $elem->[1]\n";
-			}
-		}
-	' "$topic" "$not_in_next" "$not_in_master"
-	exit 1
-fi
-
-<<\DOC_END
-
-This sample hook safeguards topic branches that have been
-published from being rewound.
-
-The workflow assumed here is:
-
- * Once a topic branch forks from "master", "master" is never
-   merged into it again (either directly or indirectly).
-
- * Once a topic branch is fully cooked and merged into "master",
-   it is deleted.  If you need to build on top of it to correct
-   earlier mistakes, a new topic branch is created by forking at
-   the tip of the "master".  This is not strictly necessary, but
-   it makes it easier to keep your history simple.
-
- * Whenever you need to test or publish your changes to topic
-   branches, merge them into "next" branch.
-
-The script, being an example, hardcodes the publish branch name
-to be "next", but it is trivial to make it configurable via
-$GIT_DIR/config mechanism.
-
-With this workflow, you would want to know:
-
-(1) ... if a topic branch has ever been merged to "next".  Young
-    topic branches can have stupid mistakes you would rather
-    clean up before publishing, and things that have not been
-    merged into other branches can be easily rebased without
-    affecting other people.  But once it is published, you would
-    not want to rewind it.
-
-(2) ... if a topic branch has been fully merged to "master".
-    Then you can delete it.  More importantly, you should not
-    build on top of it -- other people may already want to
-    change things related to the topic as patches against your
-    "master", so if you need further changes, it is better to
-    fork the topic (perhaps with the same name) afresh from the
-    tip of "master".
-
-Let's look at this example:
-
-		   o---o---o---o---o---o---o---o---o---o "next"
-		  /       /           /           /
-		 /   a---a---b A     /           /
-		/   /               /           /
-	       /   /   c---c---c---c B         /
-	      /   /   /             \         /
-	     /   /   /   b---b C     \       /
-	    /   /   /   /             \     /
-    ---o---o---o---o---o---o---o---o---o---o---o "master"
-
-
-A, B and C are topic branches.
-
- * A has one fix since it was merged up to "next".
-
- * B has finished.  It has been fully merged up to "master" and "next",
-   and is ready to be deleted.
-
- * C has not merged to "next" at all.
-
-We would want to allow C to be rebased, refuse A, and encourage
-B to be deleted.
-
-To compute (1):
-
-	git rev-list ^master ^topic next
-	git rev-list ^master        next
-
-	if these match, topic has not merged in next at all.
-
-To compute (2):
-
-	git rev-list master..topic
-
-	if this is empty, it is fully merged to "master".
-
-DOC_END
diff -urN /home/huyong/Public/libstm32isp/.git/hooks/prepare-commit-msg.sample ispload/.git/hooks/prepare-commit-msg.sample
--- /home/huyong/Public/libstm32isp/.git/hooks/prepare-commit-msg.sample	2018-06-21 11:00:34.000000000 +0800
+++ ispload/.git/hooks/prepare-commit-msg.sample	1970-01-01 08:00:00.000000000 +0800
@@ -1,36 +0,0 @@
-#!/bin/sh
-#
-# An example hook script to prepare the commit log message.
-# Called by "git commit" with the name of the file that has the
-# commit message, followed by the description of the commit
-# message's source.  The hook's purpose is to edit the commit
-# message file.  If the hook fails with a non-zero status,
-# the commit is aborted.
-#
-# To enable this hook, rename this file to "prepare-commit-msg".
-
-# This hook includes three examples.  The first comments out the
-# "Conflicts:" part of a merge commit.
-#
-# The second includes the output of "git diff --name-status -r"
-# into the message, just before the "git status" output.  It is
-# commented because it doesn't cope with --amend or with squashed
-# commits.
-#
-# The third example adds a Signed-off-by line to the message, that can
-# still be edited.  This is rarely a good idea.
-
-case "$2,$3" in
-  merge,)
-    /usr/bin/perl -i.bak -ne 's/^/# /, s/^# #/#/ if /^Conflicts/ .. /#/; print' "$1" ;;
-
-# ,|template,)
-#   /usr/bin/perl -i.bak -pe '
-#      print "\n" . `git diff --cached --name-status -r`
-#	 if /^#/ && $first++ == 0' "$1" ;;
-
-  *) ;;
-esac
-
-# SOB=$(git var GIT_AUTHOR_IDENT | sed -n 's/^\(.*>\).*$/Signed-off-by: \1/p')
-# grep -qs "^$SOB" "$1" || echo "$SOB" >> "$1"
diff -urN /home/huyong/Public/libstm32isp/.git/hooks/update.sample ispload/.git/hooks/update.sample
--- /home/huyong/Public/libstm32isp/.git/hooks/update.sample	2018-06-21 11:00:34.000000000 +0800
+++ ispload/.git/hooks/update.sample	1970-01-01 08:00:00.000000000 +0800
@@ -1,128 +0,0 @@
-#!/bin/sh
-#
-# An example hook script to block unannotated tags from entering.
-# Called by "git receive-pack" with arguments: refname sha1-old sha1-new
-#
-# To enable this hook, rename this file to "update".
-#
-# Config
-# ------
-# hooks.allowunannotated
-#   This boolean sets whether unannotated tags will be allowed into the
-#   repository.  By default they won't be.
-# hooks.allowdeletetag
-#   This boolean sets whether deleting tags will be allowed in the
-#   repository.  By default they won't be.
-# hooks.allowmodifytag
-#   This boolean sets whether a tag may be modified after creation. By default
-#   it won't be.
-# hooks.allowdeletebranch
-#   This boolean sets whether deleting branches will be allowed in the
-#   repository.  By default they won't be.
-# hooks.denycreatebranch
-#   This boolean sets whether remotely creating branches will be denied
-#   in the repository.  By default this is allowed.
-#
-
-# --- Command line
-refname="$1"
-oldrev="$2"
-newrev="$3"
-
-# --- Safety check
-if [ -z "$GIT_DIR" ]; then
-	echo "Don't run this script from the command line." >&2
-	echo " (if you want, you could supply GIT_DIR then run" >&2
-	echo "  $0 <ref> <oldrev> <newrev>)" >&2
-	exit 1
-fi
-
-if [ -z "$refname" -o -z "$oldrev" -o -z "$newrev" ]; then
-	echo "usage: $0 <ref> <oldrev> <newrev>" >&2
-	exit 1
-fi
-
-# --- Config
-allowunannotated=$(git config --bool hooks.allowunannotated)
-allowdeletebranch=$(git config --bool hooks.allowdeletebranch)
-denycreatebranch=$(git config --bool hooks.denycreatebranch)
-allowdeletetag=$(git config --bool hooks.allowdeletetag)
-allowmodifytag=$(git config --bool hooks.allowmodifytag)
-
-# check for no description
-projectdesc=$(sed -e '1q' "$GIT_DIR/description")
-case "$projectdesc" in
-"Unnamed repository"* | "")
-	echo "*** Project description file hasn't been set" >&2
-	exit 1
-	;;
-esac
-
-# --- Check types
-# if $newrev is 0000...0000, it's a commit to delete a ref.
-zero="0000000000000000000000000000000000000000"
-if [ "$newrev" = "$zero" ]; then
-	newrev_type=delete
-else
-	newrev_type=$(git cat-file -t $newrev)
-fi
-
-case "$refname","$newrev_type" in
-	refs/tags/*,commit)
-		# un-annotated tag
-		short_refname=${refname##refs/tags/}
-		if [ "$allowunannotated" != "true" ]; then
-			echo "*** The un-annotated tag, $short_refname, is not allowed in this repository" >&2
-			echo "*** Use 'git tag [ -a | -s ]' for tags you want to propagate." >&2
-			exit 1
-		fi
-		;;
-	refs/tags/*,delete)
-		# delete tag
-		if [ "$allowdeletetag" != "true" ]; then
-			echo "*** Deleting a tag is not allowed in this repository" >&2
-			exit 1
-		fi
-		;;
-	refs/tags/*,tag)
-		# annotated tag
-		if [ "$allowmodifytag" != "true" ] && git rev-parse $refname > /dev/null 2>&1
-		then
-			echo "*** Tag '$refname' already exists." >&2
-			echo "*** Modifying a tag is not allowed in this repository." >&2
-			exit 1
-		fi
-		;;
-	refs/heads/*,commit)
-		# branch
-		if [ "$oldrev" = "$zero" -a "$denycreatebranch" = "true" ]; then
-			echo "*** Creating a branch is not allowed in this repository" >&2
-			exit 1
-		fi
-		;;
-	refs/heads/*,delete)
-		# delete branch
-		if [ "$allowdeletebranch" != "true" ]; then
-			echo "*** Deleting a branch is not allowed in this repository" >&2
-			exit 1
-		fi
-		;;
-	refs/remotes/*,commit)
-		# tracking branch
-		;;
-	refs/remotes/*,delete)
-		# delete tracking branch
-		if [ "$allowdeletebranch" != "true" ]; then
-			echo "*** Deleting a tracking branch is not allowed in this repository" >&2
-			exit 1
-		fi
-		;;
-	*)
-		# Anything else (is there anything else?)
-		echo "*** Update hook: unknown type of update to ref $refname of type $newrev_type" >&2
-		exit 1
-		;;
-esac
-
-# --- Finished
-exit 0
Binary files /home/huyong/Public/libstm32isp/.git/index and ispload/.git/index differ
diff -urN /home/huyong/Public/libstm32isp/.git/info/exclude ispload/.git/info/exclude
--- /home/huyong/Public/libstm32isp/.git/info/exclude	2018-06-21 11:00:34.000000000 +0800
+++ ispload/.git/info/exclude	1970-01-01 08:00:00.000000000 +0800
@@ -1,6 +0,0 @@
-# git ls-files --others --exclude-from=.git/info/exclude
-# Lines that start with '#' are comments.
-# For a project mostly in C, the following would be a good set of
-# exclude patterns (uncomment them if you want to use them):
-# *.[oa]
-# *~
diff -urN /home/huyong/Public/libstm32isp/.git/logs/HEAD ispload/.git/logs/HEAD
--- /home/huyong/Public/libstm32isp/.git/logs/HEAD	2018-06-21 11:00:43.000000000 +0800
+++ ispload/.git/logs/HEAD	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-0000000000000000000000000000000000000000 9ca3336248dc9d0b0fa481ce5bd85d0df7e854f5 root <root@pc.(none)> 1529550043 +0800	clone: from https://github.com/wengkai/stm32isp.git
diff -urN /home/huyong/Public/libstm32isp/.git/logs/refs/heads/master ispload/.git/logs/refs/heads/master
--- /home/huyong/Public/libstm32isp/.git/logs/refs/heads/master	2018-06-21 11:00:43.000000000 +0800
+++ ispload/.git/logs/refs/heads/master	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-0000000000000000000000000000000000000000 9ca3336248dc9d0b0fa481ce5bd85d0df7e854f5 root <root@pc.(none)> 1529550043 +0800	clone: from https://github.com/wengkai/stm32isp.git
diff -urN /home/huyong/Public/libstm32isp/.git/logs/refs/remotes/origin/HEAD ispload/.git/logs/refs/remotes/origin/HEAD
--- /home/huyong/Public/libstm32isp/.git/logs/refs/remotes/origin/HEAD	2018-06-21 11:00:43.000000000 +0800
+++ ispload/.git/logs/refs/remotes/origin/HEAD	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-0000000000000000000000000000000000000000 9ca3336248dc9d0b0fa481ce5bd85d0df7e854f5 root <root@pc.(none)> 1529550043 +0800	clone: from https://github.com/wengkai/stm32isp.git
Binary files /home/huyong/Public/libstm32isp/.git/objects/00/665cb5b0f7cfaefcb8a85df372baa5e8fece4c and ispload/.git/objects/00/665cb5b0f7cfaefcb8a85df372baa5e8fece4c differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/0b/3bc8cedf60367f7b3c163a351be8bb6ce73dc6 and ispload/.git/objects/0b/3bc8cedf60367f7b3c163a351be8bb6ce73dc6 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/10/e50c76354a3b6b42ec45db6ff3391b15433bd9 and ispload/.git/objects/10/e50c76354a3b6b42ec45db6ff3391b15433bd9 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/13/cd9b47427e33e7ab4beecc7187acdc53c3f1ab and ispload/.git/objects/13/cd9b47427e33e7ab4beecc7187acdc53c3f1ab differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/14/e98a1a3067cebc6bc25939cd87e501a4303353 and ispload/.git/objects/14/e98a1a3067cebc6bc25939cd87e501a4303353 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/20/180ffeea5dd714dd4abecfaf1a2328c1806096 and ispload/.git/objects/20/180ffeea5dd714dd4abecfaf1a2328c1806096 differ
diff -urN /home/huyong/Public/libstm32isp/.git/objects/23/03968d9cfc973dce8f601e1b672e7f2d4e6cfc ispload/.git/objects/23/03968d9cfc973dce8f601e1b672e7f2d4e6cfc
--- /home/huyong/Public/libstm32isp/.git/objects/23/03968d9cfc973dce8f601e1b672e7f2d4e6cfc	2018-06-21 11:00:42.000000000 +0800
+++ ispload/.git/objects/23/03968d9cfc973dce8f601e1b672e7f2d4e6cfc	1970-01-01 08:00:00.000000000 +0800
@@ -1,2 +0,0 @@
-xuQMK√@ıÍ˛äÅ\⁄≈ö&VÑÊ‘/∞h∞ xP$l≥ìfi≤	…∆§ˇ›ŸÄ$∂∫ßù˜ÛﬁÃl≥b◊W7g.g¿!«<ÂeJ[¬¢BaPB°ß‡è=o‰˘#“R@o÷ò¥®¶éz∑äpó1G%Zb·*gõË6bïJcÈ +ôﬂ?,Ó¢«ıÛ
-Óç˝…ê1ÛY¢mSõ™âD-⁄fEºá/vﬁËZÌ4S⁄Äê≤¬∫é‡L‘ÊIdJˆâ8HaƒKÆs~%’©◊¯avÄÛπ5NÇQöíCäÇÏZy(JøJÇ›ÈZ+3 !¡¥Êrt‘¶È3◊pGhÜ∫á¥Cq;UøÌ34¯èÁ≤…ÀﬂsPKïÄÀª;Ÿ{~ß¨î
\ No newline at end of file
Binary files /home/huyong/Public/libstm32isp/.git/objects/23/4464e20ae773e1a77eddf6116252339ca24136 and ispload/.git/objects/23/4464e20ae773e1a77eddf6116252339ca24136 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/28/15ba728883615644cd4c979015f0f1503b4331 and ispload/.git/objects/28/15ba728883615644cd4c979015f0f1503b4331 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/2c/e7700eaaa6c4489c7a776c20b3945565d412d1 and ispload/.git/objects/2c/e7700eaaa6c4489c7a776c20b3945565d412d1 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/33/3f150a88057a3a82c7a69446074b193dcdd5eb and ispload/.git/objects/33/3f150a88057a3a82c7a69446074b193dcdd5eb differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/49/5abc1e536ac799344dfdd3e8e21acc3afb02a9 and ispload/.git/objects/49/5abc1e536ac799344dfdd3e8e21acc3afb02a9 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/53/9d2f1dfc6b1c06d12d29c212483de817e5b5c7 and ispload/.git/objects/53/9d2f1dfc6b1c06d12d29c212483de817e5b5c7 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/59/e6f10d2b259fa6546ce851a8d466bafdebb752 and ispload/.git/objects/59/e6f10d2b259fa6546ce851a8d466bafdebb752 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/5b/2f085e293eaf95367db62fe3f9caf7feb26376 and ispload/.git/objects/5b/2f085e293eaf95367db62fe3f9caf7feb26376 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/68/43b4e6fab479b8403002bb398c834404963e15 and ispload/.git/objects/68/43b4e6fab479b8403002bb398c834404963e15 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/70/803fb59edc583db5aecc9b50010935e089c027 and ispload/.git/objects/70/803fb59edc583db5aecc9b50010935e089c027 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/71/6143520215a673124904750eebe2090a958126 and ispload/.git/objects/71/6143520215a673124904750eebe2090a958126 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/72/0816ad53733d119297f1786b398126e2335ebe and ispload/.git/objects/72/0816ad53733d119297f1786b398126e2335ebe differ
diff -urN /home/huyong/Public/libstm32isp/.git/objects/72/331ab458bb177c908db962a1dec0c85297f2be ispload/.git/objects/72/331ab458bb177c908db962a1dec0c85297f2be
--- /home/huyong/Public/libstm32isp/.git/objects/72/331ab458bb177c908db962a1dec0c85297f2be	2018-06-21 11:00:42.000000000 +0800
+++ ispload/.git/objects/72/331ab458bb177c908db962a1dec0c85297f2be	1970-01-01 08:00:00.000000000 +0800
@@ -1,2 +0,0 @@
-x+)JMU0±¥`040031Q–Kœ,…LœÀ/Je(Ltb]V,‰…R ˜˙'◊‘F5®*ﬂƒÏ‘¥ÃúTœ®=r¡Y«gö¯˛Ω¸‚ë‘´ﬂL+°jÇ\]|]_˙Wÿ≥Û dwóŒ˜Úçò°*2R+@ÜË%3|_ˇﬁw›%ÊÇõröõN=≤Áœ˛g—e04ÿoùw'¬vÎ∫3≥9MtPá* MÃÃ3I©≈d¬ƒÈ«Æ˝π(°órÒªÏ|òä‘‹‹ƒ†ö©ˇs8ÇÆ´nJ<Ùìõ√˛{Ã‰öGN®j2îôßıŒ˘3›ˆ\Çút∫^ΩÆ_Œ®ö‚‘¢Ãƒêì{s¬Wµº0‹t´ä~zcô“T5
-¸ˇ^≈^πÎµÔ¸z)eçÉ	”`jJrççÄ∆p[ü8w?¡¨æ⁄FÃ T˙≈ÓúÁ∂«Pîd0DÎsƒi⁄≠üjVªMˇÒœSﬂˇmJ.É*)I- bl/ ’¡Ze’t|Ÿ7voI€≥W_#´»`XP∞xﬁ˘£Kw?cæ›·æjﬂˇço3@h≈-
\ No newline at end of file
Binary files /home/huyong/Public/libstm32isp/.git/objects/75/f497b1569c8cb244108b8d0ffc06179dba271c and ispload/.git/objects/75/f497b1569c8cb244108b8d0ffc06179dba271c differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/78/87e760b74b02553ad8903bc107fc30ee2fd17c and ispload/.git/objects/78/87e760b74b02553ad8903bc107fc30ee2fd17c differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/7d/c1deeb5fe6682cf8acd8d17662871fe39af3d3 and ispload/.git/objects/7d/c1deeb5fe6682cf8acd8d17662871fe39af3d3 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/89/98071d7534ce9ab68e3a43db3c591cf0cdd01f and ispload/.git/objects/89/98071d7534ce9ab68e3a43db3c591cf0cdd01f differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/92/228434909197c6d6fcd1182e64d1f71d9f1430 and ispload/.git/objects/92/228434909197c6d6fcd1182e64d1f71d9f1430 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/95/ff6c0852d725b261c2f90b083ff75c937ce242 and ispload/.git/objects/95/ff6c0852d725b261c2f90b083ff75c937ce242 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/9a/f52de4d970633b5405f58fa9968f52d3d4feda and ispload/.git/objects/9a/f52de4d970633b5405f58fa9968f52d3d4feda differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/9c/a3336248dc9d0b0fa481ce5bd85d0df7e854f5 and ispload/.git/objects/9c/a3336248dc9d0b0fa481ce5bd85d0df7e854f5 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/9e/88b36f60dac28300806feddf652c9f44efff1b and ispload/.git/objects/9e/88b36f60dac28300806feddf652c9f44efff1b differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/9e/8d63e458d4c38e52fc8b368f248ca4f7adc433 and ispload/.git/objects/9e/8d63e458d4c38e52fc8b368f248ca4f7adc433 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/a0/54f75b1010762ce0755d54149ed427bbdcf202 and ispload/.git/objects/a0/54f75b1010762ce0755d54149ed427bbdcf202 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/a0/70a39ecfc5a5bbe71603db8847aabeffb1ed69 and ispload/.git/objects/a0/70a39ecfc5a5bbe71603db8847aabeffb1ed69 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/a4/fb5756a5370c1162e898371600a6250cf4a779 and ispload/.git/objects/a4/fb5756a5370c1162e898371600a6250cf4a779 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/a8/bece5b04ddee9e54d23ed87efcd2b83fc6981e and ispload/.git/objects/a8/bece5b04ddee9e54d23ed87efcd2b83fc6981e differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/ae/6f87a8144acb45d44926fde763c9c6e0ffdb18 and ispload/.git/objects/ae/6f87a8144acb45d44926fde763c9c6e0ffdb18 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/b2/127d47cbffa4e43f5791dbc1b9f646098a814d and ispload/.git/objects/b2/127d47cbffa4e43f5791dbc1b9f646098a814d differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/b2/7f18cdc1b3fa3f1ec1ea2a536f3aee9779464d and ispload/.git/objects/b2/7f18cdc1b3fa3f1ec1ea2a536f3aee9779464d differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/b5/e1e09d0de6b40103adc94ad5b7ba91cef6d213 and ispload/.git/objects/b5/e1e09d0de6b40103adc94ad5b7ba91cef6d213 differ
diff -urN /home/huyong/Public/libstm32isp/.git/objects/c3/d2fe718f545cb9d4934f4744e043de6f334003 ispload/.git/objects/c3/d2fe718f545cb9d4934f4744e043de6f334003
--- /home/huyong/Public/libstm32isp/.git/objects/c3/d2fe718f545cb9d4934f4744e043de6f334003	2018-06-21 11:00:42.000000000 +0800
+++ ispload/.git/objects/c3/d2fe718f545cb9d4934f4744e043de6f334003	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-xMèÕJ√PÑ]üß»Fçi‚tW§A1æ¿Iríz Ω◊XﬂﬁõÖ Ãj`æôÈçÔQ?=‹1Ÿ¶÷x!⁄c÷≤a‘	í˜ìË>≥⁄¶>n´+Üì^"n˜-^|HrE€‡,¡âπ√´€t?1â≈{s`k’Õ%QQL¬È+H‹ç≤Ë –Q\“INÍ}Mk'&√Òtü≥ÑGL¡€^F%…#ƒ-º≥ôí°-xÎ∞≠ g¨∏˜ã–ﬂÏäË∞±¨fáûy.œ¨‡Ñyı ¸öËÅ›X
\ No newline at end of file
Binary files /home/huyong/Public/libstm32isp/.git/objects/c7/06b9bc2616929659f82afcb83c9401bd1a4377 and ispload/.git/objects/c7/06b9bc2616929659f82afcb83c9401bd1a4377 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/ce/7426e057d3809d09f6acb7b2bde012fcf075ac and ispload/.git/objects/ce/7426e057d3809d09f6acb7b2bde012fcf075ac differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/cf/4d89793fda57d37559f0a38287c84d4f35f977 and ispload/.git/objects/cf/4d89793fda57d37559f0a38287c84d4f35f977 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/d1/b9b6637116652ad2354e86057d87c5d7b4e896 and ispload/.git/objects/d1/b9b6637116652ad2354e86057d87c5d7b4e896 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/d3/f507b70197ae376eccd3db17cfcca6297e20b7 and ispload/.git/objects/d3/f507b70197ae376eccd3db17cfcca6297e20b7 differ
diff -urN /home/huyong/Public/libstm32isp/.git/objects/d5/81b3067f641502397763da533331122f9de04d ispload/.git/objects/d5/81b3067f641502397763da533331122f9de04d
--- /home/huyong/Public/libstm32isp/.git/objects/d5/81b3067f641502397763da533331122f9de04d	2018-06-21 11:00:42.000000000 +0800
+++ ispload/.git/objects/d5/81b3067f641502397763da533331122f9de04d	1970-01-01 08:00:00.000000000 +0800
@@ -1,4 +0,0 @@
-xmR]oõ0›kÓØ∏RS)<H´¶öµJe$k5≠a"HS¡∏Õÿ;Q˚ÔkáØN⁄æ∂œπÁ¯\
-°
-º›læ\ SMìÀRC#Ω√W∆ ˛Ò+zpí\#˘ìÈì€wíÓ‡MﬁΩrÉñàZ;∆!ã“á]ÊP⁄4◊Wµn!˘˛Û‡öºñæ¬äøΩ‘Ç€™·V≥µÖÊ]ùW8é]Ô_9Öí∑f
-ùËl™™±QÉÌµÿ–Ø˙¥ó∞å—ÉÂÙeì::´FkˆÏl≤öÔ&boÈ–|F˜†HÃŒ±ÅMî‚r’GÊπÀL)Åµ<)ñõZI›´⁄ŒÂË¡bπäcë(\ﬁOßpÈ+äó>Ô- çœC¬FË∑Ûƒ∏6`ÏÁ≥Ú¬&H‹+Î&ëúxW(ÕëJô”Ï`'œµ˘6K±µ¸Î€·`PÚS`Ãª‘Eüâv·z˚∏ø≈ı˙Ê*ùv-µq—∞˛„@KÖ¨ù„¿‡®ª@ÿ$DP‘“ÒSÒnO<ódπJüº1âπÄˇ˚1Ÿ?S¥öxFªøâÀíK£¡?Ï‚døç“g˙ÕÂÊ
\ No newline at end of file
Binary files /home/huyong/Public/libstm32isp/.git/objects/d5/ee6d7ae73dc722aa61073636c06e62a01dbfb3 and ispload/.git/objects/d5/ee6d7ae73dc722aa61073636c06e62a01dbfb3 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/d6/0c31a97a544b53039088d14fe9114583c0efc3 and ispload/.git/objects/d6/0c31a97a544b53039088d14fe9114583c0efc3 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/da/a8b360c63fbb1c99e78a17bf07702a8c3849f4 and ispload/.git/objects/da/a8b360c63fbb1c99e78a17bf07702a8c3849f4 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/e4/b55965079c24a481cedd7413ddd4607da0957a and ispload/.git/objects/e4/b55965079c24a481cedd7413ddd4607da0957a differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/f4/7f52c51769c3bd371f514fc4f8ad158deb87d7 and ispload/.git/objects/f4/7f52c51769c3bd371f514fc4f8ad158deb87d7 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/f7/8c21516c57aa84e831b2da7a0f9f67817622a4 and ispload/.git/objects/f7/8c21516c57aa84e831b2da7a0f9f67817622a4 differ
Binary files /home/huyong/Public/libstm32isp/.git/objects/f7/afef4daed20370d91e29b2a195c4bcfcbfc0cd and ispload/.git/objects/f7/afef4daed20370d91e29b2a195c4bcfcbfc0cd differ
diff -urN /home/huyong/Public/libstm32isp/.git/objects/f8/afe1c283e8ca575616be530644309f4d6af3a7 ispload/.git/objects/f8/afe1c283e8ca575616be530644309f4d6af3a7
--- /home/huyong/Public/libstm32isp/.git/objects/f8/afe1c283e8ca575616be530644309f4d6af3a7	2018-06-21 11:00:41.000000000 +0800
+++ ispload/.git/objects/f8/afe1c283e8ca575616be530644309f4d6af3a7	1970-01-01 08:00:00.000000000 +0800
@@ -1,2 +0,0 @@
-xïèÕJC1Ö›ößË¢°frÛ+"ÇKÈ⁄ı$ô¥±Ωπ%M|z/Ç‡Ó,Œw~“2œu¿Ñx7:3ò¿∂†Ã**
-Y£mboê|÷÷F*ôctFâunú):∏à∆Ü‰STZ£Ù—gYJí]»ëî√ÙÁWM$ßº˜ì])≠S÷)∏ —Y–»)ÍiBA∑q\:|p;¿;Ux˛Z’âÍÎ˜Ám«˘∂KÌ–¨ÎPØ·Az)E˙Ω3¯ﬂ†ÿs?0ƒN-a;”uŸBmcÅKD!6∂¥rÆi\üƒÊ~O'.ıÃ‚‡ê^q
\ No newline at end of file
diff -urN /home/huyong/Public/libstm32isp/.git/packed-refs ispload/.git/packed-refs
--- /home/huyong/Public/libstm32isp/.git/packed-refs	2018-06-21 11:00:43.000000000 +0800
+++ ispload/.git/packed-refs	1970-01-01 08:00:00.000000000 +0800
@@ -1,2 +0,0 @@
-# pack-refs with: peeled fully-peeled 
-9ca3336248dc9d0b0fa481ce5bd85d0df7e854f5 refs/remotes/origin/master
diff -urN /home/huyong/Public/libstm32isp/.git/refs/heads/master ispload/.git/refs/heads/master
--- /home/huyong/Public/libstm32isp/.git/refs/heads/master	2018-06-21 11:00:43.000000000 +0800
+++ ispload/.git/refs/heads/master	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-9ca3336248dc9d0b0fa481ce5bd85d0df7e854f5
diff -urN /home/huyong/Public/libstm32isp/.git/refs/remotes/origin/HEAD ispload/.git/refs/remotes/origin/HEAD
--- /home/huyong/Public/libstm32isp/.git/refs/remotes/origin/HEAD	2018-06-21 11:00:43.000000000 +0800
+++ ispload/.git/refs/remotes/origin/HEAD	1970-01-01 08:00:00.000000000 +0800
@@ -1 +0,0 @@
-ref: refs/remotes/origin/master
diff -urN /home/huyong/Public/libstm32isp/.gitignore ispload/.gitignore
--- /home/huyong/Public/libstm32isp/.gitignore	2018-06-21 11:00:43.000000000 +0800
+++ ispload/.gitignore	1970-01-01 08:00:00.000000000 +0800
@@ -1,9 +0,0 @@
-*.o
-stm32isp
-*.pdf
-*.hex
-t
-
-GPATH
-GRTAGS
-GTAGS
diff -urN /home/huyong/Public/libstm32isp/serial.c ispload/serial.c
--- /home/huyong/Public/libstm32isp/serial.c	2018-06-22 09:44:23.114310379 +0800
+++ ispload/serial.c	2018-06-28 16:45:53.629388185 +0800
@@ -66,6 +66,10 @@
 			case  38400: speed =  B38400;  break;
 			case  57600: speed =  B57600;  break;
 			case 115200: speed = B115200;  break;
+			case 230400: speed = B230400;  break;
+			case 460800: speed = B460800;  break;
+			case 500000: speed = B500000;  break;
+			case 576000: speed = B576000;  break;
 			default:    speed = B19200; break;
 		}
 		cfsetispeed(&optnew, speed);
@@ -139,16 +143,20 @@
 	p = buffer;
 
 	while (len > 0) {
-				usleep(10000);
-	
-	w = write(fd, p, 1);
-		if ( w < 1 ) {
-			ret = SER_ERR;
-			break;
-		}
-		
-		len --;
-		p   += 1;
+	    
+	    //usleep(10000);
+	    usleep(5000);
+	    w = write(fd, p, 1);
+	    //w = write(fd, p, len);
+	    if ( w < 1 ) {
+		ret = SER_ERR;
+		break;
+	    }
+
+	    len--;
+	    p += 1;
+	    //len -= w;
+	    //p += w;
 	}
 	return ret;
 }
diff -urN /home/huyong/Public/libstm32isp/stm32isp.c ispload/stm32isp.c
--- /home/huyong/Public/libstm32isp/stm32isp.c	2018-06-28 10:45:46.053265865 +0800
+++ ispload/stm32isp.c	2018-06-28 14:18:16.305338044 +0800
@@ -41,6 +41,9 @@
 {
     int err =STM_ERR;
 
+    stm32CmdGet();
+    stm32GetID();
+
     if (readHexFile(filename, &mp))
     {
         stm32Erase();
@@ -58,10 +61,10 @@
     return err;
 }
 
-int stm32isp_exit(void)
+void stm32isp_exit(void)
 {
     stm32Close();
     mmapDelete(&mp);
-    return STM_OK;
+    return ;
 }
 
diff -urN /home/huyong/Public/libstm32isp/stm32isp.h ispload/stm32isp.h
--- /home/huyong/Public/libstm32isp/stm32isp.h	2018-06-28 10:45:22.485265732 +0800
+++ ispload/stm32isp.h	2018-06-28 11:07:36.637273285 +0800
@@ -5,6 +5,6 @@
 
 int stm32isp_init(const char *port, unsigned int baud, unsigned int bootp, unsigned int reset);
 int stm32isp_load(const char *filename);
-int stm32isp_exit(void);
+void stm32isp_exit(void);
 
 #endif
